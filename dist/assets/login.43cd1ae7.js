import{u as e,a as s,b as r}from"./token.a72cd05d.js";import{g as o}from"./userCenter.9a6bef5c.js";import{p as t}from"./vendor.a451946c.js";const a=e(),n=s();function u(e,s){return r.post(a.url+"/user/login/",{email:e.value.email,password:e.value.password,code:e.value.password,login_type:s})}function i(e){return r.post(a.url+"/user/code/",{email:e})}function p(e){if(""===n.token)return e.push("/login"),!0;o().then((s=>{if(200===s.status)return e.push("/indexPage"),!1})).catch((s=>{console.log(s),r.post(a.url+"/user/refresh/",{refresh:n.refresh}).then((s=>{n.removeToken(),n.setToken(s.data.access),o().then((s=>{if(200===s.status)return e.push("/indexPage"),!1}))})).catch((s=>(t({message:"登录过期，请重新登录",type:"warning",duration:2500,offset:45}),e.push("/login"),!0)))}))}export{p as i,u as l,i as v};
