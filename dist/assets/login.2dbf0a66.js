import{a as e,u as r,b as s}from"./token.e73ac34f.js";import{g as o}from"./userCenter.22ed895d.js";import{g as t}from"./vendor.f204c7b0.js";const a=e(),n=r();function u(e,r){return s.post(a.url+"/user/login/",{email:e.value.email,password:e.value.password,code:e.value.password,login_type:r})}function c(e){return s.post(a.url+"/user/code/",{email:e})}async function i(){if(""===n.token)return!0;try{if(200===(await o()).status)return!1}catch(e){if(console.log(e),"ERR_NETWORK"===e.code)return t({message:"网络错误",type:"error",duration:2500,offset:45}),!1;try{const e=await async function(){return s.post(a.url+"/user/refresh/",{refresh:n.refresh})}();return n.removeToken(),n.setToken(e.data.access),!1}catch(r){return console.log(r),!0}}}export{i,u as l,c as v};
