import{u as e,a as s,b as o}from"./token.48e906ce.js";import{g as a}from"./userCenter.2a8f9ef9.js";import{k as t}from"./vendor.720acc60.js";const r=e(),n=s();function u(e,s){return o.post(r.url+"/user/login/",{email:e.value.email,password:e.value.password,code:e.value.password,login_type:s})}function i(e){return o.post(r.url+"/user/code/",{email:e})}function c(e){""!==n.token?a().then((s=>{200===s.status&&e.push("/indexPage")})).catch((s=>{console.log(s),403===s.status&&o.post(r.url+"/user/refresh/",{refresh:n.refresh}).then((s=>{n.removeToken(),n.setToken(s.data.access),a().then((s=>{200===s.status&&e.push("/indexPage")}))})).catch((s=>{t({message:"登录过期，请重新登录",type:"warning",duration:2500,offset:45}),e.push("/login")}))})):e.push("/login")}export{c as i,u as l,i as v};
