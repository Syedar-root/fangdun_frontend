<script setup>
import { onMounted, ref, defineProps } from 'vue';
import learnVue from './learn.vue';
import choiceQuestionsVue from './choiceQuestions.vue';
import subjectiveQuestionsVue from './subjectiveQuestions.vue';
const props = defineProps({
    topic: {
        type: String,
    },
    ancestorTopic: {
        type: Array,
    }
})

const questionsTypeItemMenuShow = ref(false);
// 学习
const learnVueShow = ref(false);
// 选择题测试
const choiseTestVueShow = ref(false);
const TFTestVueShow = ref(false);
// 主观题测试
const subjectiveQuestionsVueShow = ref(false);
const flags = ref(0);
const selectedChoiceQuestions = (flag) => {
    console.log("Selected");
    questionsTypeItemMenuShow.value = false;
    learnVueShow.value = false;
    subjectiveQuestionsVueShow.value = false;
    if (flag === 1) {
        choiseTestVueShow.value = true;
    } else if (flag === 2) {
        TFTestVueShow.value = true;
    }
    flags.value = flag;
}
const selectedSubjectiveQuestions = () => {
    questionsTypeItemMenuShow.value = false;
    learnVueShow.value = false;
    choiseTestVueShow.value = false;
    TFTestVueShow.value = false;
    subjectiveQuestionsVueShow.value = true;
}

const emit = defineEmits(['wantBack', 'addToNodeRemark'])

function back() {
    questionsTypeItemMenuShow.value = false;
    if (learnVueShow.value != true) {
        learnVueShow.value = true;
        choiseTestVueShow.value = false;
        TFTestVueShow.value = false;
        subjectiveQuestionsVueShow.value = false;
    }
    else {
        emit('wantBack', false);
    }
}

function handleAddToNodeRemark(text) {
    emit('addToNodeRemark', text)
}

onMounted(() => {
    console.log(props);
    learnVueShow.value = true;
})

</script>

<template>
    <div class="aiExtendedContainer">
        <div class="header">
            <div class="left" @click="back">
                <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M21.875 8.75C21.875 8.75 13.125 15.1944 13.125 17.5C13.125 19.8056 21.875 26.25 21.875 26.25"
                        stroke="#1A1A1A" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round" />
                </svg>

            </div>
            <div class="center">
                <div class="title">AI节点解释</div>
            </div>
            <div class="right" @click="questionsTypeItemMenuShow = !questionsTypeItemMenuShow">
                <!-- <svg class="icon" width="35" height="35" viewBox="0 0 35 35" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_2_52)">
                        <path
                            d="M24.95 34.7054H2.77336C2.12575 34.7015 1.50577 34.4425 1.04783 33.9846C0.589898 33.5267 0.330922 32.9067 0.327057 32.2591V2.74095C0.330922 2.09334 0.589898 1.47336 1.04783 1.01542C1.50577 0.557488 2.12575 0.298512 2.77336 0.294647H24.95C25.5977 0.298511 26.2177 0.557474 26.6757 1.0154C27.1337 1.47332 27.3928 2.09331 27.3968 2.74095V7.51697H25.2076V2.74095C25.2041 2.67434 25.176 2.61139 25.1289 2.56423C25.0817 2.51706 25.0188 2.489 24.9522 2.48546H2.77336C2.70675 2.489 2.6438 2.51706 2.59664 2.56423C2.54947 2.61139 2.52141 2.67434 2.51787 2.74095V32.2591C2.5158 32.297 2.52175 32.335 2.53535 32.3705C2.54894 32.406 2.56987 32.4382 2.59676 32.465C2.62365 32.4919 2.6559 32.5128 2.69141 32.5263C2.72692 32.5398 2.76488 32.5457 2.80282 32.5436H24.95C24.988 32.5457 25.026 32.5398 25.0615 32.5263C25.097 32.5128 25.1292 32.4919 25.1561 32.465C25.183 32.4382 25.2039 32.406 25.2175 32.3705C25.2311 32.335 25.2371 32.297 25.235 32.2591V27.7676H27.4258V32.2006C27.4297 32.5257 27.3695 32.8484 27.2487 33.1502C27.1278 33.452 26.9487 33.7271 26.7215 33.9597C26.4944 34.1923 26.2236 34.3779 25.9247 34.5058C25.6258 34.6338 25.3046 34.7016 24.9795 34.7054H24.95Z"
                            fill="black" />
                        <path
                            d="M24.95 35H2.77335C2.0487 34.9935 1.35554 34.7029 0.84296 34.1906C0.33038 33.6784 0.0393286 32.9854 0.0324097 32.2607V2.74094C0.0389913 2.01633 0.329651 1.32323 0.841894 0.81067C1.35414 0.298112 2.04706 0.00702689 2.77166 0L24.95 0C25.6747 0.00647203 26.3679 0.297083 26.8806 0.809338C27.3932 1.32159 27.6844 2.01457 27.6914 2.73925V7.81159H24.913V2.78008H2.81249V32.249H24.9425V27.4729H27.7225V32.2006C27.7303 32.9344 27.4466 33.6413 26.9336 34.1662C26.4207 34.691 25.7205 34.9909 24.9867 35H24.95ZM24.95 0.589268H2.77335C2.2042 0.595083 1.66003 0.823874 1.25772 1.2265C0.855413 1.62913 0.627048 2.17347 0.621678 2.74262V32.2591C0.627387 32.8283 0.856201 33.3726 1.25894 33.775C1.66168 34.1773 2.20619 34.4056 2.77545 34.4107H24.9812C25.559 34.4031 26.1102 34.1664 26.5137 33.7526C26.9171 33.3388 27.1398 32.7818 27.1328 32.2039V28.0622H25.5317V32.2523C25.5347 32.3301 25.5215 32.4076 25.4931 32.4801C25.4647 32.5525 25.4216 32.6183 25.3665 32.6734C25.3115 32.7284 25.2457 32.7714 25.1732 32.7998C25.1007 32.8282 25.0232 32.8412 24.9454 32.8382H2.81039C2.73262 32.8412 2.65507 32.8282 2.58259 32.7998C2.51012 32.7714 2.4443 32.7284 2.38924 32.6734C2.33419 32.6183 2.2911 32.5525 2.26268 32.4801C2.23425 32.4076 2.22111 32.3301 2.22407 32.2523V2.72537C2.23109 2.58586 2.28966 2.45394 2.38843 2.35517C2.48719 2.25641 2.61912 2.19784 2.75862 2.19081H24.9677C25.1072 2.19784 25.2391 2.25641 25.3379 2.35517C25.4367 2.45394 25.4952 2.58586 25.5023 2.72537V7.22232H27.1038V2.74094C27.098 2.17172 26.8691 1.62749 26.4664 1.22517C26.0637 0.822845 25.5193 0.594529 24.95 0.589268Z"
                            fill="black" />
                        <path
                            d="M13.1798 21.164H8.46233C8.32037 21.164 8.17979 21.1361 8.04862 21.0818C7.91746 21.0275 7.79828 20.9479 7.6979 20.8475C7.59752 20.7471 7.5179 20.628 7.4636 20.4968C7.4093 20.3656 7.38138 20.2251 7.38144 20.0831C7.3905 19.7993 7.50728 19.5296 7.70806 19.3288C7.90883 19.1281 8.17853 19.0113 8.46233 19.0022H13.1798C13.3218 19.0024 13.4624 19.0305 13.5935 19.0851C13.7246 19.1396 13.8437 19.2194 13.9439 19.32C14.0441 19.4206 14.1236 19.5399 14.1776 19.6712C14.2317 19.8025 14.2594 19.9432 14.259 20.0852C14.2639 20.2282 14.2392 20.3707 14.1867 20.5038C14.1342 20.6368 14.0548 20.7577 13.9536 20.8589C13.8524 20.96 13.7315 21.0393 13.5984 21.0918C13.4653 21.1443 13.3228 21.1688 13.1798 21.164ZM34.6502 12.6343C34.4511 11.2478 33.7107 9.99671 32.5911 9.15496C31.4715 8.31321 30.064 7.94942 28.6767 8.14326C28.4264 8.19841 28.2039 8.34073 28.0488 8.5448L25.2868 11.979L17.255 21.8597C17.1467 21.9919 17.0693 22.1466 17.0286 22.3126L15.2831 29.5059C15.1535 29.9028 15.1615 30.1962 15.4792 30.4664C15.5849 30.5565 15.8383 30.6836 16.0685 30.6769C16.1855 30.6769 16.3631 30.6348 16.6578 30.5287L23.4272 27.6076C23.6119 27.5461 23.7711 27.4254 23.8801 27.2642L34.4625 13.3882C34.5522 13.2872 34.6162 13.1662 34.6492 13.0353C34.6823 12.9043 34.6833 12.7674 34.6523 12.636L34.6502 12.6343ZM18.7303 23.8679C19.3369 23.827 19.9361 24.0204 20.4043 24.4083C20.941 24.8568 21.3029 25.4797 21.4266 26.1681V26.2485L17.7736 27.8189L18.7303 23.8679ZM23.2142 24.6638C22.8849 23.8787 22.3462 23.1991 21.6569 22.6994C21.1228 22.3124 20.5181 22.0339 19.8769 21.8795L26.5444 13.7097C27.2782 13.6851 27.9987 13.9091 28.5892 14.3453C29.1825 14.759 29.6055 15.374 29.7795 16.0761L23.2142 24.6638ZM31.2034 14.2136C30.8576 13.5888 30.3759 13.0497 29.7938 12.636C29.2781 12.2515 28.6966 11.9644 28.0778 11.7887L29.2462 10.3282C29.9429 10.3215 30.6232 10.5396 31.1862 10.95C31.7492 11.3604 32.165 11.9413 32.3719 12.6065L31.2034 14.2136ZM18.8103 15.3673H8.46233C8.32038 15.3673 8.17983 15.3393 8.04869 15.285C7.91755 15.2307 7.79839 15.1511 7.69802 15.0507C7.59765 14.9503 7.51804 14.8312 7.46372 14.7C7.4094 14.5689 7.38144 14.4283 7.38144 14.2864C7.39059 14.0026 7.50741 13.733 7.70817 13.5322C7.90892 13.3315 8.17856 13.2146 8.46233 13.2055H18.8103C18.9522 13.2055 19.0928 13.2335 19.2239 13.2878C19.3551 13.3421 19.4742 13.4217 19.5746 13.5221C19.675 13.6224 19.7546 13.7416 19.8089 13.8727C19.8632 14.0039 19.8912 14.1444 19.8912 14.2864C19.8963 14.4297 19.8718 14.5725 19.8193 14.706C19.7668 14.8395 19.6874 14.9607 19.586 15.0621C19.4846 15.1635 19.3634 15.2429 19.2299 15.2954C19.0965 15.3479 18.9536 15.3724 18.8103 15.3673ZM18.8103 9.73681H8.46233C8.32038 9.73681 8.17983 9.70885 8.04869 9.65453C7.91755 9.60021 7.79839 9.52059 7.69802 9.42023C7.59765 9.31986 7.51804 9.2007 7.46372 9.06956C7.4094 8.93842 7.38144 8.79787 7.38144 8.65592C7.39597 8.37602 7.51516 8.11179 7.71537 7.91564C7.91557 7.71949 8.18218 7.60573 8.46233 7.59692H18.8103C18.9522 7.59692 19.0928 7.62488 19.2239 7.6792C19.3551 7.73352 19.4742 7.81314 19.5746 7.91351C19.675 8.01388 19.7546 8.13303 19.8089 8.26417C19.8632 8.39531 19.8912 8.53587 19.8912 8.67781C19.8961 8.82103 19.8715 8.96373 19.8189 9.09704C19.7664 9.23034 19.6869 9.3514 19.5855 9.45267C19.4841 9.55394 19.363 9.63326 19.2296 9.68569C19.0962 9.73812 18.9535 9.76254 18.8103 9.75743V9.73681Z"
                            fill="black" />
                        <path
                            d="M16.0521 30.9711C15.7351 30.9711 15.4241 30.8048 15.289 30.6904C14.8066 30.28 14.879 29.8001 14.9998 29.4251L16.7424 22.2428C16.7939 22.034 16.8912 21.8393 17.0273 21.6729L25.0595 11.7934L27.8164 8.36509C28.0135 8.10743 28.2952 7.92765 28.6119 7.85748L28.6346 7.85327C30.0972 7.64853 31.5814 8.03097 32.7629 8.91703C33.9444 9.80309 34.7272 11.1208 34.9402 12.5821C34.9789 12.7559 34.9762 12.9364 34.9323 13.1089C34.8884 13.2814 34.8046 13.4413 34.6877 13.5755L24.1175 27.4355C23.9744 27.6424 23.7692 27.7985 23.5316 27.8812L16.7651 30.8027L16.7571 30.8057C16.4393 30.921 16.2343 30.9711 16.0735 30.9719L16.0521 30.9711ZM28.7298 8.43496C28.5517 8.47678 28.3938 8.57932 28.2832 8.72496L28.2781 8.73128L25.5178 12.1638L17.4836 22.0458C17.4032 22.1441 17.3456 22.2592 17.3152 22.3825L15.5668 29.5863L15.5634 29.5973C15.443 29.9656 15.5019 30.0986 15.6703 30.2417C15.7322 30.2943 15.9144 30.386 16.0605 30.3822H16.0689C16.1262 30.3822 16.2558 30.3599 16.5475 30.256L23.3207 27.3336L23.3325 27.3298C23.4555 27.2886 23.5617 27.2082 23.6347 27.1009L23.6444 27.0874L34.2331 13.2009L34.2407 13.1925C34.2988 13.1269 34.3402 13.0483 34.3616 12.9633C34.383 12.8783 34.3837 12.7895 34.3636 12.7042L34.3585 12.6781C33.9688 9.96327 31.4454 8.06246 28.7293 8.43538L28.7298 8.43496ZM17.3485 28.3223L18.4946 23.5884L18.7105 23.5741C19.392 23.5273 20.0654 23.7448 20.5907 24.1815C21.1807 24.6752 21.5786 25.3605 21.7149 26.1176L21.7196 26.1433V26.4438L17.3485 28.3223ZM18.9631 24.1583L18.1987 27.3151L21.1029 26.0663C20.9674 25.5064 20.6558 25.0048 20.214 24.6352C19.8614 24.342 19.4214 24.1742 18.9631 24.1583ZM23.1401 25.2468L22.9436 24.7775C22.6357 24.0423 22.1317 23.4059 21.4868 22.9377C20.9837 22.5734 20.4138 22.3118 19.8095 22.1679L19.352 22.0588L26.4005 13.4193L26.5343 13.4147C27.3329 13.3889 28.1171 13.6322 28.7609 14.1054C29.4112 14.5598 29.8748 15.2345 30.0657 16.0045L30.0998 16.1417L23.1401 25.2468ZM20.3891 21.7204C20.9052 21.8916 21.392 22.141 21.8324 22.46C22.4291 22.8928 22.9214 23.4537 23.2731 24.1015L29.4567 16.0129C29.2813 15.4348 28.9164 14.9325 28.4208 14.5869L28.4141 14.5823C27.9127 14.213 27.3081 14.0102 26.6854 14.0027L20.3891 21.7204ZM13.2177 21.4607H8.46146C8.09665 21.4607 7.74678 21.3158 7.48882 21.0579C7.23086 20.7999 7.08594 20.45 7.08594 20.0852V20.0759C7.09811 19.7176 7.24591 19.3772 7.49947 19.1236C7.75302 18.8701 8.0934 18.7223 8.45178 18.7101H13.1785C13.5424 18.7101 13.8914 18.8543 14.1491 19.1111C14.4068 19.3679 14.5523 19.7163 14.5536 20.0802C14.5593 20.2595 14.5289 20.4382 14.4642 20.6056C14.3995 20.773 14.3017 20.9256 14.1768 21.0545C14.0519 21.1834 13.9024 21.2858 13.7371 21.3557C13.5719 21.4257 13.3942 21.4617 13.2147 21.4616L13.2177 21.4607ZM7.67647 20.0898C7.67716 20.2969 7.75996 20.4952 7.9067 20.6412C8.05475 20.7873 8.25433 20.8692 8.4623 20.8694H13.1903C13.2929 20.8728 13.395 20.8551 13.4904 20.8174C13.5858 20.7797 13.6725 20.7229 13.7451 20.6503C13.8176 20.5778 13.8745 20.4912 13.9123 20.3958C13.95 20.3004 13.9677 20.1983 13.9644 20.0957V20.0852C13.9644 19.9819 13.9441 19.8797 13.9046 19.7843C13.8651 19.6888 13.8072 19.6021 13.7342 19.5291C13.6612 19.4561 13.5745 19.3982 13.4791 19.3587C13.3837 19.3192 13.2814 19.2989 13.1781 19.299H8.46398C8.25748 19.3081 8.06193 19.3944 7.91608 19.5409C7.77022 19.6874 7.68471 19.8833 7.67647 20.0898ZM18.8469 15.6628H8.4623C8.09748 15.6623 7.74774 15.5171 7.48986 15.2591C7.23197 15.001 7.087 14.6512 7.08678 14.2864V14.2767C7.09915 13.9184 7.24702 13.5781 7.50053 13.3246C7.75404 13.0711 8.09431 12.9232 8.45262 12.9109H18.8103C19.1742 12.9109 19.5233 13.0551 19.7811 13.312C20.0389 13.5688 20.1845 13.9174 20.1858 14.2813C20.1915 14.4607 20.1611 14.6394 20.0963 14.8068C20.0316 14.9742 19.9339 15.1268 19.809 15.2557C19.6841 15.3846 19.5346 15.487 19.3693 15.5569C19.204 15.6269 19.0263 15.6628 18.8469 15.6628ZM7.67605 14.2914C7.6776 14.499 7.7611 14.6976 7.90836 14.8439C8.05561 14.9902 8.25471 15.0724 8.4623 15.0726H18.8208C18.9236 15.0763 19.0261 15.0587 19.1219 15.021C19.2177 14.9833 19.3047 14.9263 19.3774 14.8536C19.4502 14.7808 19.5072 14.6938 19.5449 14.598C19.5826 14.5023 19.6002 14.3998 19.5965 14.2969V14.2864C19.5965 14.0779 19.5137 13.8779 19.3662 13.7304C19.2188 13.583 19.0188 13.5001 18.8103 13.5001H8.46735C8.26014 13.5084 8.06365 13.5945 7.91702 13.7411C7.77038 13.8877 7.68435 14.0842 7.67605 14.2914ZM31.1693 14.7612L30.9454 14.3563C30.62 13.7706 30.1679 13.265 29.6221 12.8764L29.6166 12.8726C29.1298 12.5092 28.5806 12.2382 27.9961 12.0728L27.5693 11.9516L29.1023 10.0352H29.2752C30.0296 10.0349 30.7642 10.2758 31.3719 10.7227C31.9795 11.1697 32.4283 11.7992 32.6526 12.5194L32.6947 12.6609L31.1693 14.7612ZM29.9672 12.3982C30.459 12.7493 30.8844 13.185 31.2236 13.6849L32.044 12.5573C31.8429 12.0078 31.4828 11.5306 31.0095 11.1865C30.5362 10.8424 29.9711 10.6471 29.3864 10.6254L28.5736 11.6414C29.0719 11.8257 29.5413 12.0806 29.9672 12.3982ZM18.8469 10.0521H18.7993L18.5152 10.042V10.0306H8.4623C8.09763 10.0302 7.74802 9.8851 7.49015 9.62724C7.23229 9.36938 7.08722 9.01977 7.08678 8.65509V8.63994C7.10707 8.28692 7.25829 7.95417 7.51088 7.70672C7.76347 7.45927 8.09926 7.31492 8.45262 7.30188H18.8103C19.1741 7.30188 19.5232 7.44605 19.781 7.70282C20.0388 7.9596 20.1843 8.30807 20.1858 8.67193C20.1913 8.8512 20.1608 9.02975 20.096 9.19698C20.0312 9.36421 19.9334 9.51672 19.8085 9.64545C19.6836 9.77418 19.5342 9.87651 19.369 9.94636C19.2038 10.0162 19.0262 10.0522 18.8469 10.0521ZM7.67605 8.66309C7.67826 8.87023 7.76205 9.06815 7.90924 9.21392C8.05643 9.35969 8.25515 9.44156 8.4623 9.44177H19.0291C19.1959 9.40027 19.3433 9.30273 19.4467 9.16548C19.55 9.02824 19.6031 8.85963 19.5969 8.68792V8.6774C19.5969 8.46887 19.5141 8.26889 19.3667 8.12144C19.2192 7.97399 19.0192 7.89115 18.8107 7.89115H8.46735C8.26352 7.89972 8.07002 7.98324 7.92399 8.1257C7.77796 8.26817 7.68966 8.45953 7.67605 8.66309Z"
                            fill="black" />
                    </g>
                    <defs>
                        <clipPath id="clip0_2_52">
                            <rect width="35" height="35" fill="white" />
                        </clipPath>
                    </defs>
                </svg> -->
                <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M24.0481 10.1094C24.0481 10.1094 24.9231 10.9844 25.7981 12.7344C25.7981 12.7344 28.5788 8.35939 31.048 7.4844M15.3244 1.36818C10.9511 1.18443 7.57367 1.68668 7.57367 1.68668C5.44043 1.84068 1.35245 3.03418 1.35245 10.0201C1.35245 16.9431 1.3087 25.4795 1.35245 28.8833C1.35245 30.9623 2.64045 35.8132 7.09592 36.0722C12.5121 36.3872 22.2683 36.4555 26.7448 36.0722C27.9418 36.004 31.9318 35.0642 32.4358 30.7243C32.959 26.2268 32.8558 23.1031 32.8558 22.3593"
                        stroke="#1A1A1A" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                        d="M10.0482 20.6093H17.0481M10.0482 27.6093H24.0481M36.333 10.1094C36.333 14.9411 32.413 18.8593 27.5743 18.8593C26.4245 18.8605 25.2858 18.635 24.2232 18.1958C23.1606 17.7566 22.1949 17.1123 21.3815 16.2996C20.5681 15.487 19.9228 14.522 19.4825 13.4599C19.0422 12.3977 18.8156 11.2592 18.8156 10.1094C18.8156 5.27592 22.7373 1.35944 27.5743 1.35944C28.7241 1.35829 29.8629 1.58377 30.9255 2.02298C31.9881 2.46219 32.9537 3.10652 33.7671 3.91915C34.5806 4.73177 35.2259 5.69674 35.6661 6.75891C36.1064 7.82107 36.333 8.95959 36.333 10.1094Z"
                        stroke="#1A1A1A" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round" />
                </svg>

            </div>

            <!-- 题型菜单 -->
            <transition name="questionsType">
                <div class="questionsTypeMenu" v-show="questionsTypeItemMenuShow">
                    <transition name="questionsTypeItem">
                        <a class="typeItem" v-show="questionsTypeItemMenuShow" style="--i:1"
                            @click="selectedChoiceQuestions(1)">选择题</a>
                    </transition>
                    <transition name="questionsTypeItem">
                        <a class="typeItem" v-show="questionsTypeItemMenuShow" style="--i:2"
                            @click="selectedChoiceQuestions(2)">判断题</a>
                    </transition>
                    <transition name="questionsTypeItem">
                        <a class="typeItem" v-show="questionsTypeItemMenuShow" style="--i:3"
                            @click="selectedSubjectiveQuestions">主观题</a>
                    </transition>
                </div>
            </transition>
        </div>

        <div class="main">
            <transition name="mainVue">
                <learnVue :topic="props.topic" :ancestorTopic="props.ancestorTopic"
                    @addToNodeRemark="handleAddToNodeRemark" v-show="learnVueShow"></learnVue>
            </transition>
            <transition name="mainVue">
                <choiceQuestionsVue v-if="choiseTestVueShow" :text="props.topic" :isChoised="flags">
                </choiceQuestionsVue>
            </transition>
            <transition name="mainVue">
                <choiceQuestionsVue v-if="TFTestVueShow" :text="props.topic" :isChoised="flags"></choiceQuestionsVue>
            </transition>
            <transition name="mainVue">
                <subjectiveQuestionsVue v-if="subjectiveQuestionsVueShow" :text="props.topic">
                </subjectiveQuestionsVue>
            </transition>
        </div>
    </div>
</template>

<style lang="scss" scoped>
@import '../scss/aiExtendedLearning.scss'
</style>